-- CREATION OF TABLES
DROP TABLE BETTING.USERS

CREATE TABLE BETTING.USERS
(
	USERNAME VARCHAR(50) NOT NULL,
	PASSWORD VARCHAR(50) NOT NULL,
	NAME VARCHAR(30) NOT NULL,
	SURNAME VARCHAR(30) NOT NULL,
	DOB DATE NOT NULL,
	PREMIUM SMALLINT NOT NULL,
	CREDIT_CARD BIGINT NOT NULL,
	EXPIRY_DATE DATE NOT NULL,
	CVV SMALLINT NOT NULL,
	INVALID_PASS_COUNT SMALLINT DEFAULT 0,
	LOCK_TIME TIMESTAMP DEFAULT NULL,
	
	CONSTRAINT PK_USERNAME PRIMARY KEY (USERNAME),
	CONSTRAINT CH_PREMIUM CHECK (PREMIUM IN (0, 1))
);


CREATE TABLE BETTING.LEVELS
(
	LEVEL_ID SMALLINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	LEVEL_NAME VARCHAR(20),
	
	CONSTRAINT PK_LEVEL_ID PRIMARY KEY (LEVEL_ID)
);

CREATE TABLE BETTING.BETS
(
	USERNAME VARCHAR(50),
	RISK_LEVEL SMALLINT,
	AMOUNT SMALLINT,
	
	CONSTRAINT FK_USERNAME FOREIGN KEY (USERNAME) REFERENCES BETTING.USERS (USERNAME),
	CONSTRAINT FK_RISK_LEVEL FOREIGN KEY (RISK_LEVEL) REFERENCES BETTING.LEVELS (LEVEL_ID)
);

-- INSERTING DATA
INSERT INTO BETTING.LEVELS (LEVEL_NAME) 
	VALUES('LOW');
	
INSERT INTO BETTING.LEVELS (LEVEL_NAME) 
	VALUES ('MEDIUM');
	
INSERT INTO BETTING.LEVELS (LEVEL_NAME)
	VALUES('HIGH');
